// prisma/schema.prisma

// 1️⃣ Datasource: connect to Neon (PostgreSQL)
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 2️⃣ Generator: Prisma Client
generator client {
  provider = "prisma-client-js"
}

// 3️⃣ Employee Model
model Employee {
  id String @id @default(cuid())
  empId String @unique
  firstName String
  lastName String
  dateOfBirth DateTime?
  gender String?
  aadhaarNumber String?
  panNumber String?
  email String? @unique
  phoneNumber String?
  emergencyContact String?
  photo String?
  bloodGroup String?
  presentAddress String?
  permanentAddress String?
  designation String?
  department String?
  dateOfJoining DateTime?
  workLocation String?
  bankName String?
  accountNumber String?
  ifscCode String?
  password String? // hashed password; nullable until user sets it
  changedTempPassword Boolean @default(false) // true once the user has replaced the temp password
  tempPasswordHash String? // hashed temporary password generated by HR (optional; can be null)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

// relations
  educationDetails Education[]
}

model Education {
  id             String   @id @default(cuid())
  university     String
  institution    String
  qualification  String
  yearCompleted  String
  employeeId     String   @map("employee_id")
  employee       Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}
